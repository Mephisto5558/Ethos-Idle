var IdeaType,CurrencyKind;(e=>{e[e.Red=1]="Red",e[e.Blue=2]="Blue",e[e.Green=3]="Green"})(IdeaType=IdeaType||{}),(e=>{e.People="people",e.Ideas1="ideas1",e.Ideas2="ideas2",e.Ideas3="ideas3",e.Growth="growth",e.Health="health",e.Military="military",e.Influence="influence",e.Work="work",e.Exploration="exploration"})(CurrencyKind=CurrencyKind||{});let CurrencyIconClass={[CurrencyKind.People]:"fa-users",[CurrencyKind.Ideas1]:"fa-lightbulb kind1",[CurrencyKind.Ideas2]:"fa-lightbulb kind2",[CurrencyKind.Ideas3]:"fa-lightbulb kind3",[CurrencyKind.Growth]:"fa-signal",[CurrencyKind.Health]:"fa-plus",[CurrencyKind.Military]:"fa-shield-halved",[CurrencyKind.Influence]:"fa-star",[CurrencyKind.Work]:"fa-gavel fa-rotate-270",[CurrencyKind.Exploration]:"fa-sun"};export default class Game{saveVersion=1;gameSpeed=1;openPageId=0;upgradePages=[[{name:"Fire",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:2}]},{name:"Gathering",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:2}]},{name:"Hunting",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:2},{kind:CurrencyKind.Exploration,type:"fixed",amount:1}]},{name:"Tool Use",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:3}]}],[{name:"Art",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Influence,type:"fixed",amount:4}]},{name:"Cooking",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Health,type:"fixed",amount:1}]},{name:"Language",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Ideas1,type:"percentage",amount:5},{kind:CurrencyKind.Ideas2,type:"percentage",amount:5},{kind:CurrencyKind.Ideas3,type:"percentage",amount:5}]},{name:"Shelter",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:2}]},{name:"Spears",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:3}]}],[{name:"Burial",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Influence,type:"fixed",amount:3}]},{name:"Clothing",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:3}]},{name:"Herbalism",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:1},{kind:CurrencyKind.Health,type:"fixed",amount:1}]},{name:"Shamanism",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Ideas1,type:"percentage",amount:5},{kind:CurrencyKind.Growth,type:"fixed",amount:3}]}],[{name:"Archery",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:5}]},{name:"Cave Painting",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Ideas3,type:"percentage",amount:5},{kind:CurrencyKind.Exploration,type:"fixed",amount:1}]},{name:"Fishing",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:2}]},{name:"Music",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Influence,type:"fixed",amount:2}]},{name:"Textiles",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:3}]}],[{name:"Domestication",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:5}]},{name:"Pottery",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:3},{kind:CurrencyKind.Influence,type:"fixed",amount:2}]},{name:"Sedentism",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:2},{kind:CurrencyKind.Health,type:"fixed",amount:3}]},{name:"Warfare",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:3}]}],[{name:"Agriculture",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:4},{kind:CurrencyKind.Health,type:"fixed",amount:3}]},{name:"Artisans",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:1},{kind:CurrencyKind.Work,type:"fixed",amount:3},{kind:CurrencyKind.Influence,type:"fixed",amount:3}]},{name:"Canoe",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:3},{kind:CurrencyKind.Military,type:"fixed",amount:1}]},{name:"Symbology",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Ideas2,type:"percentage",amount:5}]}],[{name:"Brewing",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Health,type:"fixed",amount:4}]},{name:"Expeditions",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:4}]},{name:"Irrigation",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:4},{kind:CurrencyKind.Work,type:"fixed",amount:2}]},{name:"Megaliths",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Influence,type:"fixed",amount:4}]},{name:"Weaving",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:4}]}],[{name:"Architecture",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Health,type:"fixed",amount:5},{kind:CurrencyKind.Influence,type:"fixed",amount:5}]},{name:"Sailing",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:5}]},{name:"Smelting",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:8},{kind:CurrencyKind.Work,type:"fixed",amount:4}]},{name:"Wheel",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:6}]}],[{name:"Bronze Working",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:4},{kind:CurrencyKind.Work,type:"fixed",amount:8}]},{name:"Government",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:2},{kind:CurrencyKind.Health,type:"fixed",amount:6}]},{name:"Horseback Riding",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:4},{kind:CurrencyKind.Military,type:"fixed",amount:3}]},{name:"Plough",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:12}]},{name:"Writing",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Ideas1,type:"percentage",amount:5},{kind:CurrencyKind.Ideas2,type:"percentage",amount:5},{kind:CurrencyKind.Ideas3,type:"percentage",amount:5}]}],[{name:"Mathematics",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Ideas2,type:"percentage",amount:5}]},{name:"Monarchism",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Influence,type:"fixed",amount:12}]},{name:"Money",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Work,type:"fixed",amount:8},{kind:CurrencyKind.Influence,type:"fixed",amount:4}]},{name:"Shipbuilding",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:6},{kind:CurrencyKind.Military,type:"fixed",amount:2}]},{name:"Swords",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:6}]}],[{name:"Calendar",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Growth,type:"fixed",amount:16},{kind:CurrencyKind.Work,type:"fixed",amount:4}]},{name:"Law",type:IdeaType.Red,rewards:[{kind:CurrencyKind.Military,type:"fixed",amount:6},{kind:CurrencyKind.Health,type:"fixed",amount:6}]},{name:"Libraries",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Ideas3,type:"percentage",amount:5},{kind:CurrencyKind.Influence,type:"fixed",amount:4}]},{name:"Sewers",type:IdeaType.Green,rewards:[{kind:CurrencyKind.Health,type:"fixed",amount:10}]},{name:"Sundial",type:IdeaType.Blue,rewards:[{kind:CurrencyKind.Exploration,type:"fixed",amount:10},{kind:CurrencyKind.Work,type:"fixed",amount:4}]}]].map(e=>e.reduce((e,{name:n,type:r,rewards:a},d)=>(e[n]={position:d,level:1,type:r,rewards:a},e),{}));currency={[CurrencyKind.People]:0,[CurrencyKind.Ideas1]:0,[CurrencyKind.Ideas2]:0,[CurrencyKind.Ideas3]:0,[CurrencyKind.Growth]:0,[CurrencyKind.Health]:0,[CurrencyKind.Military]:0,[CurrencyKind.Influence]:0,[CurrencyKind.Work]:0,[CurrencyKind.Exploration]:0};#autoSaveEnabled=!1;get openPage(){return this.upgradePages[this.openPageId]}save(){globalThis.localStorage.setItem("gameSave",btoa(JSON.stringify(this)))}load(a={}){return this.saveVersion=a.saveVersion??this.saveVersion,this.gameSpeed=a.gameSpeed??this.gameSpeed,this.openPageId=a.openPageId??this.openPageId,a.upgradePages&&(this.upgradePages=this.upgradePages.map((e,r)=>Object.fromEntries(Object.entries(e).map(([e,n])=>[e,{...n,level:a.upgradePages?.[r]?.[e]?.level??n.level}])))),this.currency=a.currency??this.currency,this}loadFromLocalStorage(){var e=globalThis.localStorage.getItem("gameSave");if(!e)return this;let n=JSON.parse(atob(e));if(!(n=Array.isArray(n)?n[0]:n))return this;if("object"!=typeof n||Array.isArray(n))throw new Error("Invalid save data from localStorage");if(!n.saveVersion||n.saveVersion<1)throw new Error("Unsupported saveData version");return this.load(n)}deleteSave(){globalThis.localStorage.removeItem("gameSave");var e=new this.constructor;return this.saveVersion=e.saveVersion,this.gameSpeed=e.gameSpeed,this.openPageId=e.openPageId,this.upgradePages=e.upgradePages,this}registerAutoSave(){if(this.#autoSaveEnabled)throw new Error("Do not register autosave twice!");return document.addEventListener("visibilitychange",()=>{"hidden"==document.visibilityState&&this.save()}),window.addEventListener("pagehide",()=>this.save()),this.#autoSaveEnabled=!0,this}}export{CurrencyKind,CurrencyIconClass};